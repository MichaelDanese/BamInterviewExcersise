<div class="container">
  <h1>Stargate Astronaut Management</h1>

  <section>
    <h2>Create Person</h2>
    <form [formGroup]="createPersonForm" (ngSubmit)="onCreatePerson()">
      <input type="text" formControlName="personName" placeholder="Person name" />
      <button type="submit" [disabled]="isLoading()">Create Person</button>
    </form>
  </section>

  <section>
    <h2>Create Astronaut Duty</h2>
    <form [formGroup]="createDutyForm" (ngSubmit)="onCreateDuty()">
      <input type="text" formControlName="name" placeholder="Person name" />
      <input type="text" formControlName="rank" placeholder="Rank" />
      <input type="text" formControlName="dutyTitle" placeholder="Duty title" />
      <input type="date" formControlName="dutyStartDate" />
      <button type="submit" [disabled]="isLoading()">Create Duty</button>
    </form>
  </section>

  <section>
    <h2>Search Person Duties</h2>
    <form [formGroup]="searchForm" (ngSubmit)="onSearchByName()">
      <input type="text" formControlName="searchName" placeholder="Search by name" />
      <button type="submit" [disabled]="isLoading()">Search</button>
    </form>
  </section>

  <p class="success" *ngIf="successMessage()">{{ successMessage() }}</p>
  <p class="error" *ngIf="errorMessage()">{{ errorMessage() }}</p>

  <section *ngIf="selectedPerson() as selectedPerson">
    <h2>Person Details</h2>
    <p><strong>Name:</strong> {{ selectedPerson.name }}</p>
    <p><strong>Current Rank:</strong> {{ selectedPerson.currentRank || '-' }}</p>
    <p><strong>Current Duty:</strong> {{ selectedPerson.currentDutyTitle || '-' }}</p>
    <p><strong>Career Start:</strong> {{ selectedPerson.careerStartDate ? (selectedPerson.careerStartDate | date:'MM-dd-yyyy') : '-' }}</p>
    <p><strong>Career End:</strong> {{ selectedPerson.careerEndDate ? (selectedPerson.careerEndDate | date:'MM-dd-yyyy') : '-' }}</p>
  </section>

  <section *ngIf="selectedDuties().length > 0">
    <h2>Duty History</h2>
    <table>
      <thead>
        <tr>
          <th>Rank</th>
          <th>Duty Title</th>
          <th>Start Date</th>
          <th>End Date</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let duty of selectedDuties()">
          <td>{{ duty.rank }}</td>
          <td>{{ duty.dutyTitle }}</td>
          <td>{{ duty.dutyStartDate | date:'MM-dd-yyyy' }}</td>
          <td>{{ duty.dutyEndDate ? (duty.dutyEndDate | date:'MM-dd-yyyy') : '-' }}</td>
        </tr>
      </tbody>
    </table>
  </section>
</div>
